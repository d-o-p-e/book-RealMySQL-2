## 14 - 스토어드 프로그램

- 스토어드 프로그램은 문제를 많이 만들지 않고 해당 sql 파일에 정리만 해놓았습니다.

> 간단하게 스토어드 프로시저의 목록을 찾아보기 위한 쿼리 (책에 없어서 추가해봤습니다.)
>
>
> ```sql
> mysql> SHOW PROCEDURE STATUS WHERE db = '데이터베이스_이름';
> ```

### 14.2.3 - 스토어드 함수

> 함수 생성시 다음과 같은 에러가 나오면 확인해볼 사항
>

```sql
/*
  This function has none of DETERMINISTIC, NO SQL, or READS SQL DATA in
  its declaration and binary logging is enabled
  (you *might* want to use the less safe log_bin_trust_function_creators variable)
*/ -- 이와 같은 에러가 나오면 아래 사항을 확인해보자.

SHOW GLOBAL VARIABLES LIKE 'log_bin_trust_function_creators'; -- OFF 라면 ON 으로 만들어줘야 한다.
SET GLOBAL log_bin_trust_function_creators = 1; -- ON
-- 버전이 올라가면서 기본 값이 OFF 로 바뀐거 같다.

-- 참고 https://myhappyman.tistory.com/154
```

### 14.2.4 - 트리거

> 간단하게 트리거를 확인하고 싶으면 다음과 같이 사용하면 된다.
>

```sql
-- 간단하게 트리거를 확인해보고 싶을 때
SHOW TRIGGERS FROM 데이터베이스_명;

SHOW TRIGGERS
    [{FROM | IN} db_name]
    [LIKE 'pattern' | WHERE expr]
```

### 14.2.5 - 이벤트

> `ON COMPLETION PRESERVE` 구문으로 인해 이벤트가 삭제되지 않은 상황애서 동일한 이벤트를 실행하면 어떻게 될까?
>
- `Event 설정한_이벤트이름 already exists` 라는 에러와 함께 실행되지 않는다.
- 따라서, 다시 사용할거 같으면 이벤트를 삭제 후 실행하거나, 다른 이름으로 실행해야 된다.

```sql
-- 이벤트 삭제
DROP EVENT 이벤트_명;
```